var J=r=>{throw TypeError(r)};var ue=(r,e,a)=>e.has(r)||J("Cannot "+a);var C=(r,e,a)=>(ue(r,e,"read from private field"),a?a.call(r):e.get(r)),H=(r,e,a)=>e.has(r)?J("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,a);import{h as fe,i as x,j as le,g as D,x as oe,k as ve,l as K,s as k,m as O,t as S,y as de,o as ee,p as ae,q as he,I as q,z as re,A as Q,B as U,C as _e,D as W,F as B,G as ce,J as pe,K as Ee,L as Te,M as V,N as Re,O as Ae,P as Ie,Q as ge,R as xe,S as ne,T as me,V as we,W as Z,X as Ce,Y as $}from"./CMAo_ZkR.js";function be(r,e){return e}function Se(r,e,a,u){for(var f=[],d=e.length,o=0;o<d;o++)ce(e[o].e,f,!0);var h=d>0&&f.length===0&&a!==null;if(h){var T=a.parentNode;pe(T),T.append(a),u.clear(),g(r,e[0].prev,e[d-1].next)}Ee(f,()=>{for(var c=0;c<d;c++){var v=e[c];h||(u.delete(v.k),g(r,v.prev,v.next)),Te(v.e,!h)}})}function He(r,e,a,u,f,d=null){var o=r,h={flags:e,items:new Map,first:null},T=(e&ne)!==0;if(T){var c=r;o=x?k(ge(c)):c.appendChild(xe())}x&&le();var v=null,m=!1,s=oe(()=>{var l=a();return Ie(l)?l:l==null?[]:re(l)});fe(()=>{var l=D(s),n=l.length;if(m&&n===0)return;m=n===0;let A=!1;if(x){var p=o.data===ve;p!==(n===0)&&(o=K(),k(o),O(!1),A=!0)}if(x){for(var E=null,R,_=0;_<n;_++){if(S.nodeType===8&&S.data===de){o=S,A=!0,O(!1);break}var t=l[_],i=u(t,_);R=te(S,h,E,null,t,i,_,f,e,a),h.items.set(i,R),E=R}n>0&&k(K())}x||Me(l,h,o,f,e,u,a),d!==null&&(n===0?v?ee(v):v=ae(()=>d(o)):v!==null&&he(v,()=>{v=null})),A&&O(!0),D(s)}),x&&(o=S)}function Me(r,e,a,u,f,d,o){var G,P,X,z;var h=(f&we)!==0,T=(f&(V|B))!==0,c=r.length,v=e.items,m=e.first,s=m,l,n=null,A,p=[],E=[],R,_,t,i;if(h)for(i=0;i<c;i+=1)R=r[i],_=d(R,i),t=v.get(_),t!==void 0&&((G=t.a)==null||G.measure(),(A??(A=new Set)).add(t));for(i=0;i<c;i+=1){if(R=r[i],_=d(R,i),t=v.get(_),t===void 0){var se=s?s.e.nodes_start:a;n=te(se,e,n,n===null?e.first:n.next,R,_,i,u,f,o),v.set(_,n),p=[],E=[],s=n.next;continue}if(T&&Ne(t,R,i,f),(t.e.f&q)!==0&&(ee(t.e),h&&((P=t.a)==null||P.unfix(),(A??(A=new Set)).delete(t))),t!==s){if(l!==void 0&&l.has(t)){if(p.length<E.length){var y=E[0],I;n=y.prev;var Y=p[0],L=p[p.length-1];for(I=0;I<p.length;I+=1)j(p[I],y,a);for(I=0;I<E.length;I+=1)l.delete(E[I]);g(e,Y.prev,L.next),g(e,n,Y),g(e,L,y),s=y,n=L,i-=1,p=[],E=[]}else l.delete(t),j(t,s,a),g(e,t.prev,t.next),g(e,t,n===null?e.first:n.next),g(e,n,t),n=t;continue}for(p=[],E=[];s!==null&&s.k!==_;)(s.e.f&q)===0&&(l??(l=new Set)).add(s),E.push(s),s=s.next;if(s===null)continue;t=s}p.push(t),n=t,s=t.next}if(s!==null||l!==void 0){for(var w=l===void 0?[]:re(l);s!==null;)(s.e.f&q)===0&&w.push(s),s=s.next;var b=w.length;if(b>0){var ie=(f&ne)!==0&&c===0?a:null;if(h){for(i=0;i<b;i+=1)(X=w[i].a)==null||X.measure();for(i=0;i<b;i+=1)(z=w[i].a)==null||z.fix()}Se(e,w,ie,v)}}h&&me(()=>{var F;if(A!==void 0)for(t of A)(F=t.a)==null||F.apply()}),Q.first=e.first&&e.first.e,Q.last=n&&n.e}function Ne(r,e,a,u){(u&V)!==0&&U(r.v,e),(u&B)!==0?U(r.i,a):r.i=a}function te(r,e,a,u,f,d,o,h,T,c){var v=(T&V)!==0,m=(T&Re)===0,s=v?m?_e(f):W(f):f,l=(T&B)===0?o:W(o),n={i:l,v:s,k:d,a:null,e:null,prev:a,next:u};try{return n.e=ae(()=>h(r,s,l,c),x),n.e.prev=a&&a.e,n.e.next=u&&u.e,a===null?e.first=n:(a.next=n,a.e.next=n.e),u!==null&&(u.prev=n,u.e.prev=n.e),n}finally{}}function j(r,e,a){for(var u=r.next?r.next.e.nodes_start:a,f=e?e.e.nodes_start:a,d=r.e.nodes_start;d!==u;){var o=Ae(d);f.before(d),d=o}}function g(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var M,N;class ye{constructor(){H(this,M,Z(Ce([])));H(this,N,Z(""))}get routes(){return D(C(this,M))}set routes(e){$(C(this,M),e,!0)}get routeToLoad(){return D(C(this,N))}set routeToLoad(e){$(C(this,N),e,!0)}clearRoutes(){this.routes=[]}addRoute(e){this.routes.push(e)}getRouteByID(e){return this.routes.find(a=>a.id==e)}async loadRoutes(e){const u=await(await e("https://bursur.github.io/SpiraGPS/routes.json")).json();this.clearRoutes(),u.destinations.forEach(f=>this.addRoute(f))}}M=new WeakMap,N=new WeakMap;const ke=new ye;export{He as e,be as i,ke as r};
