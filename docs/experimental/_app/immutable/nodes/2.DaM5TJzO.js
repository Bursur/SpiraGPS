import{r as g,e as A,i as E}from"../chunks/CR0z0WeG.js";import{t as m,a as d,c as T}from"../chunks/BSvYFtAb.js";import"../chunks/LV1lmQdI.js";import{Y as B,g as y,D as M,Z as b,a1 as u,a0 as h,a2 as c,_ as j,a3 as f,$ as I,n as L}from"../chunks/CMAo_ZkR.js";import{i as $}from"../chunks/D0sYy9DP.js";import{v as w,a as S}from"../chunks/B6RVm4ww.js";import{d as z,e as D,s as H}from"../chunks/CRYyEhQB.js";import{g as O}from"../chunks/Wdk_4gn5.js";import{i as C}from"../chunks/0R_fgGSy.js";function _(a){var e=M(0);return function(){return arguments.length===1?(B(e,y(e)+1),arguments[0]):(y(e),a())}}const G=async({fetch:a})=>(g.loadRoutes(a),{}),me=Object.freeze(Object.defineProperty({__proto__:null,load:G},Symbol.toStringTag,{value:"Module"}));var Y=m('<div class="relative route-thumb"><a href="./editor"><img src="./editor.jpg" alt="" class="route-thumb"> <div class="bg-base-100 border-base-300 text-base-content"><p class="absolute bottom-0 route-thumb-text bg-base-200 rounded-lg">Route Editor</p></div></a></div>');function Z(a){var e=Y();d(a,e)}var P=_(()=>w),q=m('<div class="relative route-thumb"><a href="./viewer/help"><img src="./help.jpg" alt="" class="route-thumb"> <p class="absolute bottom-0 route-thumb-text bg-base-200 rounded-lg">Editor Help</p></a></div>');function J(a,e){b(e,!1),$();var t=q(),r=u(t);r.__click=()=>{P(P().enabled=!0)},c(t),d(a,t),h()}z(["click"]);async function K(a){const e=N(!1,a);return new Promise((r,l)=>{e.onchange=s=>{var n;const o=Q((n=s.target)==null?void 0:n.files);U(o).then(i=>r(i[0])).catch(i=>l(i))},e.oncancel=()=>{r(null)},e.onerror=(s,o,n,i,v)=>{l(v)},e.click()}).finally(()=>e.remove())}function N(a,e){var r;const t=document.createElement("input");return t.hidden=!0,t.type="file",t.multiple=a,t.accept=((r=e==null?void 0:e.acceptedExtensions)==null?void 0:r.join(","))??"",t}function Q(a){if(a==null)return[];const e=[];for(let t=0;t<a.length;t++)e.push(a[t]);return e}async function U(a){const e=[];for(const t of a){const r=new Promise((l,s)=>{const o=new FileReader;o.onload=n=>{var i;l({name:t.name,size:t.size,type:t.type,lastModified:t.lastModified,webkitRelativePath:t.webkitRelativePath,content:(i=n.target)==null?void 0:i.result})},o.onerror=()=>{s(o.error)},o.readAsText(t,"utf-8")});e.push(r)}return Promise.all(e)}var k=_(()=>w),F=_(()=>g),V=m('<div class="relative route-thumb"><a><img src="./load.jpg" alt="" class="route-thumb"> <div class="bg-base-100 border-base-300 text-base-content"><p class="absolute bottom-0 route-thumb-text bg-base-200 rounded-lg">Load Route File</p></div></a></div>');function W(a,e){b(e,!1);async function t(){const s=await K({acceptedExtensions:["json"]});s&&(F(F().routeToLoad=s.content),k(k().enabled=!0),O("./viewer/local"))}$();var r=V(),l=u(r);c(r),D("click",l,t),d(a,r),h()}var X=m('<div class="relative route-thumb"><a><img alt="" class="route-thumb"> <p class="absolute bottom-0 route-thumb-text bg-base-200 rounded-lg"> </p></a></div>');function ee(a,e){b(e,!0);let t=g.getRouteByID(e.id);var r=T(),l=j(r);{var s=o=>{var n=X(),i=u(n),v=u(i),p=f(v,2),x=u(p,!0);c(p),c(i),c(n),I(()=>{S(i,"href",`./viewer/${e.id??""}`),S(v,"src",`https://bursur.github.io/${t.image??""}`),H(x,t.name)}),d(o,n)};C(l,o=>{t&&o(s)})}d(a,r),h()}var te=m('<h1 class="title-text">SpiraGPS</h1> <p class="version-text">(v2.0.0)</p>',1);function ae(a){var e=te();L(2),d(a,e)}var R=_(()=>w),re=m('<!> <div class="landing-grid"><div class="grid grid-cols-3 gap-4"><!> <!> <!> <!></div></div>',1);function fe(a,e){b(e,!1),R(R().enabled=!1),$();var t=re(),r=j(t);ae(r);var l=f(r,2),s=u(l),o=u(s);A(o,1,()=>g.routes,E,(p,x)=>{ee(p,{get id(){return y(x).id}})});var n=f(o,2);W(n,{});var i=f(n,2);Z(i);var v=f(i,2);J(v,{}),c(s),c(l),d(a,t),h()}export{fe as component,me as universal};
